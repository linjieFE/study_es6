<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button id="a">Top A</button>
    <button id="d">Banner D</button>
</body>
<script type="text/javascript">
/**
 * 伪代码
 * 1.建立两对像linjieFE fangke
 * 2.让访客跟林杰cpe过通门铃通信
 * 3.选 看linjie家是否有门，有直接按，没有造门
 * 4.两者开始通信
*/
    var linjieFE = (function(arg){
        var linjieHome=function(msg){
            this.menling = msg;
        }
        var men;
        var info={
            sendMsg:function(msg){
                if(!men){
                    men= new linjieHome(msg)
                    return men;
                }
            }
        }
        return info
    })()

    var fangke = {
        calling:function(msg){
            var _linjie =  linjieFE.sendMsg(msg)
            alert(_linjie.menling);
            _linjie = null;//闭包销毁
        }
    }
    fangke.calling('ringring~')
</script>
<script type="text/javascript">
    /**
     * 页面上6个按钮
     * abc =>top
     * def =>banner
     */
    (function(){
        var top={
            init:function(){
                this.render();
                this.bind();
            },
            a:4,
            render:function(){
                var me = this;
                me.btnA = document.querySelector("#a");
            },
            bind:function(){
                var me = this;
                me.btnA.onclick = function(){
                    //业务
                    me.test()
                }
            },
            test:function(){
                banner.a=5
                alert('Banner'+banner.a);
            }

        }
        var banner={
            init:function(){
                this.render();
                this.bind();
            },
            a:4,
            render:function(){
                var me = this;
                me.btnA = document.querySelector("#d");
            },
            bind:function(){
                var me = this;
                me.btnA.onclick = function(){
                    //业务
                    me.test()
                }
            },
            test:function(){
                top.a=6
                alert('Top'+top.a);
            }
        }
        top.init();
        banner.init();
    })()
    
    
</script>
</html>